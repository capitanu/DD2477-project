(function(){"use strict";var t={2896:function(t,e,n){var a=n(8935),o=n(4549),r=n.n(o),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bg"},[a("div",{staticStyle:{"text-align":"center"},attrs:{id:"app"}},[a("img",{staticStyle:{width:"200px"},attrs:{alt:"Vue logo",src:n(240)}}),a("el-container",{staticClass:"search-and-result",attrs:{direction:"vertical"}},[a("el-container",{staticStyle:{"text-align":"center"}},[a("div",{staticClass:"search-engine-title"},[t._v("Book Search Engine")])]),a("el-container",{staticClass:"search-line",attrs:{direction:"vertical"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:18}},[a("el-autocomplete",{staticClass:"autocomplete-display",attrs:{"fetch-suggestions":t.suggest,placeholder:"search any book","trigger-on-focus":!1},on:{select:t.handleSelect},model:{value:t.inp,callback:function(e){t.inp=e},expression:"inp"}})],1),a("el-col",{attrs:{span:3}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},nativeOn:{click:function(e){return t.search.apply(null,arguments)}}},[t._v("Search")])],1),a("el-col",{attrs:{span:3}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},nativeOn:{click:function(e){return t.recommend.apply(null,arguments)}}},[t._v("Recommend")])],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"selected-tags"},t._l(t.tags,(function(e){return a("el-tag",{key:e,attrs:{closable:"",type:"warning"},on:{close:function(n){return t.handleClose(e)}}},[t._v(" "+t._s(e)+" ")])})),1)])],1)],1),a("el-container",{attrs:{direction:"vertical"}},t._l(t.result.data,(function(e){return a("el-container",{key:e._id},[a("el-container",{staticClass:"result-item"},[a("el-container",{attrs:{direction:"vertical"}},[a("el-row",[a("el-col",{attrs:{span:1}},[a("el-checkbox",{model:{value:e.checked,callback:function(n){t.$set(e,"checked",n)},expression:"item.checked"}})],1),a("el-col",{attrs:{span:23}},[a("div",{staticStyle:{"text-align":"left"}},[a("a",{attrs:{href:"https://www.goodreads.com/book/show/"+e._id}},[t._v(" "+t._s(e._source.title)+" ")])])])],1),a("p",{staticClass:"result-item-summary"},[t._v(t._s(e._source.summary))])],1)],1)],1)})),1)],1)],1)])},s=[],l=n(6166),c=n.n(l),u={name:"App",components:{},data:function(){return{inp:"",result:{data:[]},tags:[]}},watch:{},methods:{recommend:async function(){var t=this.result.data.filter((t=>t.checked)),e=t.map((t=>t._source.title));if(t=[...new Set([...this.tags,...e])],this.tags=[],0!=t.length){console.log(t);var n=await c()({method:"post",url:"http://localhost:8092/recommend",data:{titles:t}});console.log(n),this.result.data=n.data.hits.map((t=>({_id:t.docId,_source:{title:t.title,summary:t.summary,genre:t.genre}}))).filter(((t,e,n)=>n.findIndex((e=>e._id===t._id))===e))}},search:async function(){var t,e=this.result.data.filter((t=>t.checked)),n=e.map((t=>t._source.title));this.tags=[...new Set([...this.tags,...n])],console.log(this.tags),t=await c()({method:"post",url:"http://localhost:8092/query",data:{title:this.inp}}),console.log(t),this.result.data=t.data.hits},suggest:async function(t,e){var n=await c()({method:"post",url:"http://localhost:8092/suggest",data:{title:t}});console.log(n,e);for(var a=n.data[0].options,o=0;o<a.length;o++)a[o].value=a[o].text,a[o].checked=!1;e(a)},handleSelect:function(){},handleClose:function(t){const e=this.tags.indexOf(t);e>-1&&this.tags.splice(e,1)}},mounted(t){console.log(t)}},d=u,f=n(1001),p=(0,f.Z)(d,i,s,!1,null,null,null),h=p.exports;a["default"].use(r()),a["default"].config.productionTip=!1,new a["default"]({render:t=>t(h)}).$mount("#app")},240:function(t,e,n){t.exports=n.p+"img/book.dae4736a.png"}},e={};function n(a){var o=e[a];if(void 0!==o)return o.exports;var r=e[a]={exports:{}};return t[a](r,r.exports,n),r.exports}n.m=t,function(){var t=[];n.O=function(e,a,o,r){if(!a){var i=1/0;for(u=0;u<t.length;u++){a=t[u][0],o=t[u][1],r=t[u][2];for(var s=!0,l=0;l<a.length;l++)(!1&r||i>=r)&&Object.keys(n.O).every((function(t){return n.O[t](a[l])}))?a.splice(l--,1):(s=!1,r<i&&(i=r));if(s){t.splice(u--,1);var c=o();void 0!==c&&(e=c)}}return e}r=r||0;for(var u=t.length;u>0&&t[u-1][2]>r;u--)t[u]=t[u-1];t[u]=[a,o,r]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.p="/"}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,a){var o,r,i=a[0],s=a[1],l=a[2],c=0;if(i.some((function(e){return 0!==t[e]}))){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);if(l)var u=l(n)}for(e&&e(a);c<i.length;c++)r=i[c],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return n.O(u)},a=self["webpackChunkbook"]=self["webpackChunkbook"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(2896)}));a=n.O(a)})();
//# sourceMappingURL=app.baaafaa3.js.map